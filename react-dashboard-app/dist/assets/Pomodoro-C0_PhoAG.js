import{r as e,j as t,a6 as r,a7 as s,S as a,a8 as o,a9 as l,Z as n,aa as i,ab as d,ac as c,ad as x,M as g,ae as b,K as h}from"./react-vendor-BiMSSdjs.js";import{u}from"./index-rZ25EgeA.js";import{e as m,f as y,i as f}from"./firestore-SczCEyBG.js";const p=()=>{const{user:p}=u(),w=e.useRef(null),[j,k]=e.useState(!1),[N,v]=e.useState(!1),[S,C]=e.useState(1500),[T,B]=e.useState("work"),[M,I]=e.useState(0),[$,D]=e.useState(null),[L,W]=e.useState([]),[A,E]=e.useState(null),[P,R]=e.useState(25),[F,q]=e.useState(5),[G,K]=e.useState(15),[U,z]=e.useState(4),[Q,Y]=e.useState(!1),[Z,H]=e.useState(!0),[J,O]=e.useState(!1),[V,X]=e.useState(!1),[_,ee]=e.useState(!1),[te,re]=e.useState("Focus on one task at a time."),se={work:["Focus on one task at a time.","Great things never come from comfort zones.","The way to get started is to quit talking and begin doing.","Don't watch the clock; do what it does. Keep going.","Success is the sum of small efforts repeated daily."],"short-break":["Take a deep breath and recharge.","Rest when you're weary. Refresh and renew yourself.","A break is not giving up, it's taking care of yourself.","Short breaks help you stay focused longer.","Even the busiest person needs moments of rest."],"long-break":["You've earned this longer break!","Great job completing your work sessions!","Rest is not idleness, it's essential for productivity.","Take time to celebrate your progress.","A well-rested mind is a productive mind."]};e.useEffect(()=>{p&&ae()},[p]),e.useEffect(()=>{re(se[T][Math.floor(Math.random()*se[T].length)])},[T]),e.useEffect(()=>{"default"===Notification.permission&&Notification.requestPermission()},[]),e.useEffect(()=>{let e;return j&&!N&&(e=setInterval(()=>{C(e=>e<=1?(le(),0):e-1)},1e3)),()=>clearInterval(e)},[j,N]);const ae=async()=>{try{const e=(await m(p.uid)).filter(e=>"completed"!==e.status);W(e)}catch(e){console.error("Error loading tasks:",e)}},oe=e=>{switch(e){case"work":default:return P;case"short-break":return F;case"long-break":return G}},le=async()=>{if(k(!1),v(!1),A&&await y(A,{endTime:new Date,completed:!0}),Z&&w.current&&w.current.play().catch(e=>console.log("Audio play failed:",e)),"work"===T){I(e=>e+1);const e=(M+1)%U===0?"long-break":"short-break";B(e),C(60*oe(e)),re(se[e][Math.floor(Math.random()*se[e].length)]),J&&setTimeout(()=>k(!0),1e3)}else B("work"),C(60*P),re(se.work[Math.floor(Math.random()*se.work.length)]),V&&setTimeout(()=>k(!0),1e3);ne()},ne=()=>{"granted"===Notification.permission&&new Notification(("work"===T?"Work":"Break")+" session completed!",{body:"Time for a "+("work"===T?"break":"work session"),icon:"/favicon.ico"})},ie=()=>{C(60*oe(T))},de=()=>oe(T),ce=(60*de()-S)/(60*de())*100;return t.jsxs("div",{className:"min-h-screen transition-all duration-300 "+(_?"bg-gray-900":"bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50"),children:[t.jsxs("audio",{ref:w,preload:"auto",children:[t.jsx("source",{src:"/notification-sound.mp3",type:"audio/mpeg"}),t.jsx("source",{src:"/notification-sound.wav",type:"audio/wav"})]}),t.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[t.jsxs("div",{className:"flex justify-between items-center mb-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-4xl font-bold "+(_?"text-white":"text-gray-900"),children:"Pomodoro Focus Timer"}),t.jsx("p",{className:"text-lg mt-2 "+(_?"text-gray-300":"text-gray-600"),children:te})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("button",{onClick:()=>ee(!_),className:`p-3 rounded-full transition-colors ${_?"bg-gray-800 text-yellow-400 hover:bg-gray-700":"bg-white text-gray-700 hover:bg-gray-100"} shadow-lg`,children:_?"☀️":"🌙"}),t.jsx("button",{onClick:()=>H(!Z),className:`p-3 rounded-full transition-colors ${_?"bg-gray-800 text-gray-300 hover:bg-gray-700":"bg-white text-gray-700 hover:bg-gray-100"} shadow-lg`,children:Z?t.jsx(r,{className:"w-6 h-6"}):t.jsx(s,{className:"w-6 h-6"})}),t.jsx("button",{onClick:()=>Y(!Q),className:`p-3 rounded-full transition-colors ${_?"bg-gray-800 text-gray-300 hover:bg-gray-700":"bg-white text-gray-700 hover:bg-gray-100"} shadow-lg`,children:t.jsx(a,{className:"w-6 h-6"})})]})]}),Q&&t.jsxs("div",{className:"mb-8 p-6 rounded-2xl shadow-xl backdrop-blur-md "+(_?"bg-gray-800/80 border border-gray-700":"bg-white/80 border border-white/20"),children:[t.jsx("h3",{className:"text-2xl font-bold mb-6 "+(_?"text-white":"text-gray-900"),children:"⚙️ Timer Settings"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2 "+(_?"text-gray-300":"text-gray-700"),children:"Work Duration (min)"}),t.jsx("input",{type:"number",min:"1",max:"60",value:P,onChange:e=>R(parseInt(e.target.value)),className:`w-full px-4 py-3 rounded-lg border-2 transition-colors ${_?"bg-gray-700 border-gray-600 text-white focus:border-blue-500":"bg-white border-gray-300 text-gray-900 focus:border-blue-500"} focus:outline-none`})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2 "+(_?"text-gray-300":"text-gray-700"),children:"Short Break Duration (min)"}),t.jsx("input",{type:"number",min:"1",max:"30",value:F,onChange:e=>q(parseInt(e.target.value)),className:`w-full px-4 py-3 rounded-lg border-2 transition-colors ${_?"bg-gray-700 border-gray-600 text-white focus:border-blue-500":"bg-white border-gray-300 text-gray-900 focus:border-blue-500"} focus:outline-none`})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2 "+(_?"text-gray-300":"text-gray-700"),children:"Long Break Duration (min)"}),t.jsx("input",{type:"number",min:"1",max:"60",value:G,onChange:e=>K(parseInt(e.target.value)),className:`w-full px-4 py-3 rounded-lg border-2 transition-colors ${_?"bg-gray-700 border-gray-600 text-white focus:border-blue-500":"bg-white border-gray-300 text-gray-900 focus:border-blue-500"} focus:outline-none`})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2 "+(_?"text-gray-300":"text-gray-700"),children:"Sessions Until Long Break"}),t.jsx("input",{type:"number",min:"2",max:"8",value:U,onChange:e=>z(parseInt(e.target.value)),className:`w-full px-4 py-3 rounded-lg border-2 transition-colors ${_?"bg-gray-700 border-gray-600 text-white focus:border-blue-500":"bg-white border-gray-300 text-gray-900 focus:border-blue-500"} focus:outline-none`})]})]}),t.jsxs("div",{className:"flex flex-wrap gap-4",children:[t.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:J,onChange:e=>O(e.target.checked),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),t.jsx("span",{className:_?"text-gray-300":"text-gray-700",children:"Auto-start breaks"})]}),t.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:V,onChange:e=>X(e.target.checked),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),t.jsx("span",{className:_?"text-gray-300":"text-gray-700",children:"Auto-start work sessions"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[t.jsx("div",{className:"lg:col-span-2",children:t.jsxs("div",{className:"p-8 rounded-3xl shadow-2xl backdrop-blur-md text-center "+(_?"bg-gray-800/80 border border-gray-700":"bg-white/80 border border-white/20"),children:[t.jsx("div",{className:"mb-8",children:t.jsxs("div",{className:"inline-flex items-center space-x-2 px-6 py-3 rounded-full text-lg font-bold "+("work"===T?"bg-gradient-to-r from-red-500 to-red-600 text-white":"short-break"===T?"bg-gradient-to-r from-green-500 to-green-600 text-white":"bg-gradient-to-r from-blue-500 to-blue-600 text-white"),children:["work"===T&&t.jsx(o,{className:"w-6 h-6"}),"short-break"===T&&t.jsx(l,{className:"w-6 h-6"}),"long-break"===T&&t.jsx(n,{className:"w-6 h-6"}),t.jsx("span",{children:"work"===T?"Work Session":"short-break"===T?"Short Break":"Long Break"})]})}),t.jsx("div",{className:"relative mb-8",children:t.jsxs("div",{className:"w-80 h-80 mx-auto relative",children:[t.jsxs("svg",{className:"w-full h-full transform -rotate-90",viewBox:"0 0 100 100",children:[t.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:_?"#374151":"#e5e7eb",strokeWidth:"2"}),t.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"work"===T?"#ef4444":"short-break"===T?"#10b981":"#3b82f6",strokeWidth:"4",strokeDasharray:""+2*Math.PI*45,strokeDashoffset:""+2*Math.PI*45*(1-ce/100),strokeLinecap:"round",className:"transition-all duration-1000 ease-out"})]}),t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-6xl font-mono font-bold mb-2 "+(_?"text-white":"text-gray-900"),children:(e=>{const t=e%60;return`${Math.floor(e/60).toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`})(S)}),t.jsxs("div",{className:"text-sm "+(_?"text-gray-400":"text-gray-500"),children:[Math.round(ce),"% complete"]})]})})]})}),t.jsxs("div",{className:"flex justify-center space-x-4",children:[t.jsxs("button",{onClick:j?()=>{v(!N)}:async()=>{if(!j){const e=oe(T),t=await f({userId:p.uid,taskId:$?.id,type:"work"===T?"work":"break",duration:e,startTime:new Date,completed:!1});E(t)}k(!0),v(!1)},className:"flex items-center space-x-3 px-8 py-4 rounded-2xl font-bold text-lg transition-all transform hover:scale-105 "+(j?"bg-gradient-to-r from-yellow-500 to-orange-500 text-white shadow-lg hover:shadow-xl":"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg hover:shadow-xl"),children:[j?N?t.jsx(i,{className:"w-6 h-6"}):t.jsx(d,{className:"w-6 h-6"}):t.jsx(i,{className:"w-6 h-6"}),t.jsx("span",{children:j?N?"Resume":"Pause":"Start"})]}),t.jsxs("button",{onClick:async()=>{k(!1),v(!1),A&&await y(A,{endTime:new Date,completed:!1}),ie()},disabled:!j,className:"flex items-center space-x-3 px-8 py-4 bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-2xl font-bold text-lg hover:from-gray-600 hover:to-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all transform hover:scale-105 shadow-lg hover:shadow-xl",children:[t.jsx(c,{className:"w-6 h-6"}),t.jsx("span",{children:"Stop"})]}),t.jsxs("button",{onClick:()=>{le()},disabled:!j,className:"flex items-center space-x-3 px-8 py-4 bg-gradient-to-r from-purple-500 to-pink-600 text-white rounded-2xl font-bold text-lg hover:from-purple-600 hover:to-pink-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all transform hover:scale-105 shadow-lg hover:shadow-xl",children:[t.jsx(x,{className:"w-6 h-6"}),t.jsx("span",{children:"Skip"})]})]})]})}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"p-6 rounded-2xl shadow-xl backdrop-blur-md "+(_?"bg-gray-800/80 border border-gray-700":"bg-white/80 border border-white/20"),children:[t.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center "+(_?"text-white":"text-gray-900"),children:[t.jsx(g,{className:"w-6 h-6 mr-2"}),"Link to Task"]}),t.jsxs("select",{value:$?.id||"",onChange:e=>{const t=L.find(t=>t.id===e.target.value);D(t||null)},className:`w-full px-4 py-3 rounded-lg border-2 transition-colors ${_?"bg-gray-700 border-gray-600 text-white focus:border-blue-500":"bg-white border-gray-300 text-gray-900 focus:border-blue-500"} focus:outline-none`,children:[t.jsx("option",{value:"",children:"No task selected"}),L.map(e=>t.jsx("option",{value:e.id,children:e.title},e.id))]}),$&&t.jsxs("div",{className:"mt-4 p-4 rounded-lg "+(_?"bg-blue-900/50 border border-blue-700":"bg-blue-50 border border-blue-200"),children:[t.jsx("p",{className:"font-semibold "+(_?"text-blue-300":"text-blue-900"),children:$.title}),t.jsx("p",{className:"text-sm mt-1 "+(_?"text-blue-400":"text-blue-700"),children:$.subject})]})]}),t.jsxs("div",{className:"p-6 rounded-2xl shadow-xl backdrop-blur-md "+(_?"bg-gray-800/80 border border-gray-700":"bg-white/80 border border-white/20"),children:[t.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center "+(_?"text-white":"text-gray-900"),children:[t.jsx(b,{className:"w-6 h-6 mr-2"}),"Session Stats"]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-sm "+(_?"text-gray-400":"text-gray-600"),children:"Sessions Today"}),t.jsx("span",{className:"font-bold text-2xl "+(_?"text-white":"text-gray-900"),children:M})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-sm "+(_?"text-gray-400":"text-gray-600"),children:"Current Mode"}),t.jsx("span",{className:"font-bold "+("work"===T?"text-red-500":"short-break"===T?"text-green-500":"text-blue-500"),children:"work"===T?"Work":"short-break"===T?"Short Break":"Long Break"})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-sm "+(_?"text-gray-400":"text-gray-600"),children:"Until Long Break"}),t.jsxs("span",{className:"font-bold "+(_?"text-white":"text-gray-900"),children:[U-M%U," sessions"]})]})]})]}),t.jsxs("div",{className:"p-6 rounded-2xl shadow-xl backdrop-blur-md "+(_?"bg-gray-800/80 border border-gray-700":"bg-white/80 border border-white/20"),children:[t.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center "+(_?"text-white":"text-gray-900"),children:[t.jsx(h,{className:"w-6 h-6 mr-2"}),"Quick Actions"]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("button",{onClick:()=>{B("work"),C(60*P)},className:"w-full px-4 py-3 rounded-lg font-medium transition-colors "+("work"===T?"bg-red-500 text-white":_?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:["Switch to Work (",P,"m)"]}),t.jsxs("button",{onClick:()=>{B("short-break"),C(60*F)},className:"w-full px-4 py-3 rounded-lg font-medium transition-colors "+("short-break"===T?"bg-green-500 text-white":_?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:["Switch to Short Break (",F,"m)"]}),t.jsxs("button",{onClick:()=>{B("long-break"),C(60*G)},className:"w-full px-4 py-3 rounded-lg font-medium transition-colors "+("long-break"===T?"bg-blue-500 text-white":_?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:["Switch to Long Break (",G,"m)"]})]})]})]})]})]})]})};export{p as default};
