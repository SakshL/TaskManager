import{r as e,j as s,E as t,F as r,J as a,K as l,M as o,L as d,a as i,P as n,Z as c}from"./react-vendor-BiMSSdjs.js";import{u as m,a as x,L as h}from"./index-rZ25EgeA.js";import{s as u,g}from"./firestore-SczCEyBG.js";import{f as p}from"./openai-1vKnnAqY.js";const b=()=>{const{user:b}=m(),{error:j}=x(),[f,N]=e.useState([]),[w,v]=e.useState([]),[y,k]=e.useState(!0),[D,S]=e.useState(""),[T,M]=e.useState(""),[A,P]=e.useState(!1);e.useEffect(()=>{if(b){E(),G();const e=u(b.uid,e=>{N(e),k(!1)});return()=>e()}},[b]);const E=e.useCallback(async()=>{try{const e=await g(b.uid);v(e)}catch(e){console.error("Error loading pomodoro data:",e),j("Error","Failed to load Pomodoro sessions")}},[b?.uid,j]),G=e.useCallback(async()=>{try{P(!0);const e="Give me a short, motivational quote (max 20 words) for students to stay productive and focused. Just return the quote without any additional text.",s=await p(e);S(s)}catch(e){console.error("Error loading motivational quote:",e),S("Success is not final, failure is not fatal: it is the courage to continue that counts.")}finally{P(!1)}},[]),L=e.useMemo(()=>f.filter(e=>{if(!e.deadline)return!1;const s=new Date;return new Date(e.deadline).toDateString()===s.toDateString()}),[f]),C=e.useMemo(()=>L.filter(e=>"completed"===e.status).length,[L]),F=e.useMemo(()=>L.length>0?C/L.length*100:0,[L.length,C]),q=e.useMemo(()=>w.filter(e=>e.completed&&"work"===e.type).reduce((e,s)=>e+s.duration,0),[w]),J=e.useMemo(()=>f.filter(e=>e.deadline&&new Date(e.deadline)>new Date&&"completed"!==e.status).sort((e,s)=>new Date(e.deadline).getTime()-new Date(s.deadline).getTime()).slice(0,3),[f]),z=e.useMemo(()=>({total:f.length,completed:f.filter(e=>"completed"===e.status).length,inProgress:f.filter(e=>"in-progress"===e.status).length,overdue:f.filter(e=>e.deadline&&new Date(e.deadline)<new Date&&"completed"!==e.status).length}),[f]),I=e=>{switch(e){case"high":return"bg-red-100 text-red-800 border-red-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return y?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(h,{size:"xl",color:"purple"}),s.jsx("p",{className:"mt-4 text-lg font-medium text-gray-700",children:"Loading your dashboard..."})]})}):s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-50 p-6",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:[(()=>{const e=(new Date).getHours();return e<12?"Good morning":e<17?"Good afternoon":"Good evening"})(),", ",b?.displayName?.split(" ")[0]||"Student","! ðŸ‘‹"]}),s.jsx("p",{className:"text-gray-600 text-lg mt-2",children:"Ready to crush your goals today?"})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Today's Date"}),s.jsx("div",{className:"text-lg font-semibold text-gray-900",children:(new Date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]})}),s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl p-6 text-white",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(t,{className:"w-5 h-5 mr-2"}),s.jsx("span",{className:"font-medium",children:"Daily Motivation"})]}),s.jsx("button",{onClick:G,disabled:A,className:"text-white/80 hover:text-white transition-colors disabled:opacity-50",children:A?s.jsx(h,{size:"sm",color:"blue"}):"ðŸ”„"})]}),s.jsx("p",{className:"text-lg font-medium italic",children:A?"Generating inspiration...":`"${D}"`})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[s.jsx("div",{className:"bg-white/80 backdrop-blur-sm p-6 rounded-2xl border border-white/20 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Tasks"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900",children:z.total}),s.jsxs("p",{className:"text-xs text-green-600 mt-1",children:[z.completed," completed"]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl",children:s.jsx(r,{className:"w-6 h-6 text-white"})})]})}),s.jsx("div",{className:"bg-white/80 backdrop-blur-sm p-6 rounded-2xl border border-white/20 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Today's Progress"}),s.jsxs("p",{className:"text-3xl font-bold text-green-600",children:[Math.round(F),"%"]}),s.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[C," of ",L.length," done"]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-r from-green-500 to-emerald-500 rounded-xl",children:s.jsx(a,{className:"w-6 h-6 text-white"})})]})}),s.jsx("div",{className:"bg-white/80 backdrop-blur-sm p-6 rounded-2xl border border-white/20 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Focus Time"}),s.jsxs("p",{className:"text-3xl font-bold text-purple-600",children:[Math.floor(q/60),"h"]}),s.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[q%60,"m today"]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl",children:s.jsx(l,{className:"w-6 h-6 text-white"})})]})}),s.jsx("div",{className:"bg-white/80 backdrop-blur-sm p-6 rounded-2xl border border-white/20 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"In Progress"}),s.jsx("p",{className:"text-3xl font-bold text-orange-600",children:z.inProgress}),s.jsxs("p",{className:"text-xs text-red-600 mt-1",children:[z.overdue," overdue"]})]}),s.jsx("div",{className:"p-3 bg-gradient-to-r from-orange-500 to-red-500 rounded-xl",children:s.jsx(o,{className:"w-6 h-6 text-white"})})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl border border-white/20 shadow-lg p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Today's Tasks"}),s.jsx(d,{to:"/tasks",className:"text-purple-600 hover:text-purple-700 font-medium text-sm",children:"View All"})]}),L.length>0?s.jsx("div",{className:"space-y-4",children:L.slice(0,5).map(e=>s.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[s.jsx("div",{className:"w-3 h-3 rounded-full "+("completed"===e.status?"bg-green-500":"in-progress"===e.status?"bg-blue-500":"bg-gray-300")}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium "+("completed"===e.status?"line-through text-gray-500":"text-gray-900"),children:e.title}),s.jsx("p",{className:"text-sm text-gray-500",children:e.subject})]}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${I(e.priority)}`,children:e.priority})]},e.id))}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(i,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"No tasks scheduled for today"}),s.jsxs(d,{to:"/tasks",className:"inline-flex items-center mt-4 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200",children:[s.jsx(n,{className:"w-4 h-4 mr-2"}),"Add Task"]})]})]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl border border-white/20 shadow-lg p-6",children:[s.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"Quick Actions"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs(d,{to:"/tasks",className:"flex items-center space-x-3 p-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all duration-200",children:[s.jsx(n,{className:"w-5 h-5"}),s.jsx("span",{children:"Add New Task"})]}),s.jsxs(d,{to:"/pomodoro",className:"flex items-center space-x-3 p-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-lg hover:from-green-600 hover:to-emerald-700 transition-all duration-200",children:[s.jsx(l,{className:"w-5 h-5"}),s.jsx("span",{children:"Start Focus Session"})]}),s.jsxs(d,{to:"/ai-assistant",className:"flex items-center space-x-3 p-3 bg-gradient-to-r from-purple-500 to-pink-600 text-white rounded-lg hover:from-purple-600 hover:to-pink-700 transition-all duration-200",children:[s.jsx(c,{className:"w-5 h-5"}),s.jsx("span",{children:"Ask AI Assistant"})]})]})]}),s.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl border border-white/20 shadow-lg p-6",children:[s.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"Upcoming Deadlines"}),J.length>0?s.jsx("div",{className:"space-y-3",children:J.map(e=>s.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"font-medium text-gray-900 text-sm",children:e.title}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Due: ",new Date(e.deadline).toLocaleDateString()]})]},e.id))}):s.jsx("p",{className:"text-gray-500 text-sm",children:"No upcoming deadlines"})]}),s.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl border border-white/20 shadow-lg p-6",children:[s.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"Quick Notes"}),s.jsx("textarea",{value:T,onChange:e=>M(e.target.value),placeholder:"Jot down your thoughts...",className:"w-full h-24 p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm"})]})]})]})]})};export{b as default};
