import{r as e,j as s,ae as t,w as i,J as a,K as r,M as l,a as d,af as n,ag as o,ah as c,ai as m,aj as x,ak as h,al as u,am as g,an as j,ao as p,ap as b,aq as w,ar as f}from"./react-vendor-BiMSSdjs.js";import{u as N,L as v}from"./index-rZ25EgeA.js";import{s as y,g as k}from"./firestore-SczCEyBG.js";const S=()=>{const{user:S}=N(),[D,T]=e.useState([]),[F,A]=e.useState([]),[B,C]=e.useState(!0),[L,I]=e.useState("week");e.useEffect(()=>{S&&R()},[S]);const R=async()=>{try{C(!0);const e=y(S.uid,e=>{T(e)}),s=await k(S.uid);return A(s),C(!1),()=>e()}catch(e){console.error("Error loading analytics data:",e),C(!1)}},K={total:D.length,completed:D.filter(e=>"completed"===e.status).length,inProgress:D.filter(e=>"in-progress"===e.status).length,todo:D.filter(e=>"todo"===e.status).length},O=K.total>0?K.completed/K.total*100:0,P=F.filter(e=>e.completed&&"work"===e.type).reduce((e,s)=>e+s.duration,0),$=F.filter(e=>e.completed).length,z=()=>{const e=D.reduce((e,s)=>{const t=s.subject||"Uncategorized";return e[t]=(e[t]||0)+1,e},{}),s=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4"];return Object.entries(e).map(([e,t],i)=>({name:e,value:t,color:s[i%s.length]}))},E=()=>{const e=D.reduce((e,s)=>(e[s.priority]=(e[s.priority]||0)+1,e),{});return[{name:"High",value:e.high||0,color:"#EF4444"},{name:"Medium",value:e.medium||0,color:"#F59E0B"},{name:"Low",value:e.low||0,color:"#10B981"}]};return S?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900 p-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsx("div",{className:"backdrop-blur-md bg-white/10 rounded-xl p-6 mb-6 border border-white/10",children:s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-3 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-xl",children:s.jsx(t,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-white",children:"Analytics Dashboard"}),s.jsx("p",{className:"text-indigo-200",children:"Track your productivity and progress"})]})]}),s.jsxs("select",{value:L,onChange:e=>I(e.target.value),className:"px-4 py-2 bg-white/10 backdrop-blur-md border border-white/20 rounded-lg text-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200",children:[s.jsx("option",{value:"week",className:"text-gray-900",children:"Last 7 Days"}),s.jsx("option",{value:"month",className:"text-gray-900",children:"Last 30 Days"}),s.jsx("option",{value:"year",className:"text-gray-900",children:"Last Year"})]})]})}),B?s.jsx("div",{className:"flex justify-center items-center py-20",children:s.jsx(v,{size:"xl"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx("div",{className:"backdrop-blur-md bg-white/10 rounded-xl p-6 border border-white/10 hover:bg-white/15 transition-all duration-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg",children:s.jsx(i,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-indigo-200",children:"Tasks Completed"}),s.jsx("p",{className:"text-3xl font-bold text-white",children:K.completed})]})]})}),s.jsx("div",{className:"backdrop-blur-md bg-white/10 rounded-xl p-6 border border-white/10 hover:bg-white/15 transition-all duration-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg",children:s.jsx(a,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-indigo-200",children:"Completion Rate"}),s.jsxs("p",{className:"text-3xl font-bold text-white",children:[O.toFixed(1),"%"]})]})]})}),s.jsx("div",{className:"backdrop-blur-md bg-white/10 rounded-xl p-6 border border-white/10 hover:bg-white/15 transition-all duration-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg",children:s.jsx(r,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-indigo-200",children:"Focus Time"}),s.jsxs("p",{className:"text-3xl font-bold text-white",children:[Math.floor(P/60),"h ",P%60,"m"]})]})]})}),s.jsx("div",{className:"backdrop-blur-md bg-white/10 rounded-xl p-6 border border-white/10 hover:bg-white/15 transition-all duration-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-gradient-to-r from-orange-500 to-red-500 rounded-lg",children:s.jsx(l,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-indigo-200",children:"Pomodoro Sessions"}),s.jsx("p",{className:"text-3xl font-bold text-white",children:$})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"backdrop-blur-md bg-white/10 rounded-xl p-6 border border-white/10",children:[s.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[s.jsx(d,{className:"w-5 h-5 mr-2"}),"Daily Task Completion"]}),s.jsx(n,{width:"100%",height:300,children:s.jsxs(o,{data:Array.from({length:7},(e,s)=>{const t=new Date;return t.setDate(t.getDate()-s),t.toISOString().split("T")[0]}).reverse().map(e=>{const s=D.filter(s=>"completed"===s.status&&s.updatedAt&&(s.updatedAt instanceof Date?s.updatedAt.toISOString().split("T")[0]===e:new Date(1e3*s.updatedAt.seconds).toISOString().split("T")[0]===e)).length;return{date:new Date(e).toLocaleDateString("en-US",{weekday:"short"}),completed:s}}),children:[s.jsx(c,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),s.jsx(m,{dataKey:"date",tick:{fill:"white",fontSize:12}}),s.jsx(x,{tick:{fill:"white",fontSize:12}}),s.jsx(h,{contentStyle:{backgroundColor:"rgba(0,0,0,0.8)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"8px",color:"white"}}),s.jsx(u,{dataKey:"completed",fill:"#3B82F6",radius:[4,4,0,0]})]})})]}),s.jsxs("div",{className:"backdrop-blur-md bg-white/10 rounded-xl p-6 border border-white/10",children:[s.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[s.jsx(r,{className:"w-5 h-5 mr-2"}),"Daily Focus Time"]}),s.jsx(n,{width:"100%",height:300,children:s.jsxs(g,{data:Array.from({length:7},(e,s)=>{const t=new Date;return t.setDate(t.getDate()-s),t.toISOString().split("T")[0]}).reverse().map(e=>{const s=F.filter(s=>s.completed&&"work"===s.type&&s.startTime&&(s.startTime instanceof Date?s.startTime.toISOString().split("T")[0]===e:new Date(1e3*s.startTime.seconds).toISOString().split("T")[0]===e)).reduce((e,s)=>e+s.duration,0);return{date:new Date(e).toLocaleDateString("en-US",{weekday:"short"}),minutes:s}}),children:[s.jsx(c,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),s.jsx(m,{dataKey:"date",tick:{fill:"white",fontSize:12}}),s.jsx(x,{tick:{fill:"white",fontSize:12}}),s.jsx(h,{formatter:e=>[`${e} minutes`,"Focus Time"],contentStyle:{backgroundColor:"rgba(0,0,0,0.8)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"8px",color:"white"}}),s.jsx(j,{type:"monotone",dataKey:"minutes",stroke:"#10B981",strokeWidth:3,dot:{fill:"#10B981",strokeWidth:2,r:4},activeDot:{r:6}})]})})]}),s.jsxs("div",{className:"backdrop-blur-md bg-white/10 rounded-xl p-6 border border-white/10",children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Tasks by Subject"}),z().length>0?s.jsx(n,{width:"100%",height:300,children:s.jsxs(p,{children:[s.jsx(b,{data:z(),cx:"50%",cy:"50%",labelLine:!1,label:({name:e,percent:s})=>`${e} ${(100*s).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:z().map((e,t)=>s.jsx(w,{fill:e.color},`cell-${t}`))}),s.jsx(h,{contentStyle:{backgroundColor:"rgba(0,0,0,0.8)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"8px",color:"white"}})]})}):s.jsx("div",{className:"flex items-center justify-center h-72 text-indigo-200",children:"No tasks to display"})]}),s.jsxs("div",{className:"backdrop-blur-md bg-white/10 rounded-xl p-6 border border-white/10",children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Tasks by Priority"}),E().some(e=>e.value>0)?s.jsx(n,{width:"100%",height:300,children:s.jsxs(p,{children:[s.jsx(b,{data:E(),cx:"50%",cy:"50%",labelLine:!1,label:({name:e,percent:s})=>`${e} ${(100*s).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:E().map((e,t)=>s.jsx(w,{fill:e.color},`cell-${t}`))}),s.jsx(h,{contentStyle:{backgroundColor:"rgba(0,0,0,0.8)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"8px",color:"white"}})]})}):s.jsx("div",{className:"flex items-center justify-center h-72 text-indigo-200",children:"No tasks to display"})]})]}),s.jsxs("div",{className:"backdrop-blur-md bg-white/10 rounded-xl p-6 border border-white/10",children:[s.jsxs("h3",{className:"text-lg font-semibold text-white mb-6 flex items-center",children:[s.jsx(f,{className:"w-5 h-5 mr-2"}),"Detailed Statistics"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-white mb-4",children:"Task Status Breakdown"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center p-2 bg-white/5 rounded-lg",children:[s.jsx("span",{className:"text-sm text-indigo-200",children:"To Do"}),s.jsx("span",{className:"font-medium text-white",children:K.todo})]}),s.jsxs("div",{className:"flex justify-between items-center p-2 bg-white/5 rounded-lg",children:[s.jsx("span",{className:"text-sm text-indigo-200",children:"In Progress"}),s.jsx("span",{className:"font-medium text-white",children:K.inProgress})]}),s.jsxs("div",{className:"flex justify-between items-center p-2 bg-white/5 rounded-lg",children:[s.jsx("span",{className:"text-sm text-indigo-200",children:"Completed"}),s.jsx("span",{className:"font-medium text-white",children:K.completed})]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-white mb-4",children:"Focus Statistics"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center p-2 bg-white/5 rounded-lg",children:[s.jsx("span",{className:"text-sm text-indigo-200",children:"Total Sessions"}),s.jsx("span",{className:"font-medium text-white",children:$})]}),s.jsxs("div",{className:"flex justify-between items-center p-2 bg-white/5 rounded-lg",children:[s.jsx("span",{className:"text-sm text-indigo-200",children:"Average Session"}),s.jsxs("span",{className:"font-medium text-white",children:[$>0?Math.round(P/$):0," min"]})]}),s.jsxs("div",{className:"flex justify-between items-center p-2 bg-white/5 rounded-lg",children:[s.jsx("span",{className:"text-sm text-indigo-200",children:"Total Focus Time"}),s.jsxs("span",{className:"font-medium text-white",children:[Math.floor(P/60),"h ",P%60,"m"]})]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-white mb-4",children:"Productivity Insights"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center p-2 bg-white/5 rounded-lg",children:[s.jsx("span",{className:"text-sm text-indigo-200",children:"Avg. Tasks/Day"}),s.jsx("span",{className:"font-medium text-white",children:(K.completed/7).toFixed(1)})]}),s.jsxs("div",{className:"flex justify-between items-center p-2 bg-white/5 rounded-lg",children:[s.jsx("span",{className:"text-sm text-indigo-200",children:"Avg. Focus/Day"}),s.jsxs("span",{className:"font-medium text-white",children:[Math.round(P/7)," min"]})]}),s.jsxs("div",{className:"flex justify-between items-center p-2 bg-white/5 rounded-lg",children:[s.jsx("span",{className:"text-sm text-indigo-200",children:"Completion Rate"}),s.jsxs("span",{className:"font-medium text-white",children:[O.toFixed(1),"%"]})]})]})]})]})]})]})]})}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(t,{className:"w-16 h-16 text-indigo-400 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Analytics"}),s.jsx("p",{className:"text-indigo-200",children:"Please log in to view your analytics"})]})})};export{S as default};
