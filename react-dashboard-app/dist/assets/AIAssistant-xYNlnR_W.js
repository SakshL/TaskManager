import{r as e,j as s,a2 as t,Y as r,U as a,b as l,a3 as i,a4 as o}from"./react-vendor-BiMSSdjs.js";import{u as n,a as c,L as d}from"./index-rZ25EgeA.js";import{f as m}from"./openai-1vKnnAqY.js";import{a as x,b as u,h as p}from"./firestore-SczCEyBG.js";const h=()=>{const{user:h}=n(),{success:b,error:f}=c(),[g,j]=e.useState([]),[w,v]=e.useState(""),[y,N]=e.useState(!1),[k,C]=e.useState(!1),[I,S]=e.useState(!0),A=e.useRef(null),E=e.useRef(null),H=e.useCallback(()=>{const e=E.current;e&&(e.style.height="auto",e.style.height=Math.min(e.scrollHeight,120)+"px")},[]);e.useEffect(()=>{H()},[w,H]),e.useEffect(()=>{if(h){S(!0);const e=x(h.uid,e=>{j(e),S(!1)});return()=>e()}},[h]),e.useEffect(()=>{D()},[g,k]);const D=()=>{A.current?.scrollIntoView({behavior:"smooth"})},z=async()=>{if(!w.trim()||y||!h)return;const e=w.trim();v(""),N(!0);try{await u({userId:h.uid,content:e,role:"user"});C(!0);const s=await m(e);await u({userId:h.uid,content:s,role:"assistant"}),b("Message sent successfully!")}catch(s){console.error("Error sending message:",s),f(p(s));try{await u({userId:h.uid,content:"Sorry, I encountered an error. Please try again.",role:"assistant"})}catch(t){console.error("Error saving error message:",t)}}finally{N(!1),C(!1)}};return h?s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-violet-900 via-purple-900 to-indigo-900 flex flex-col",children:[s.jsx("div",{className:"backdrop-blur-md bg-white/10 border-b border-white/10 p-6 sticky top-0 z-10",children:s.jsxs("div",{className:"max-w-6xl mx-auto flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-3 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl",children:s.jsx(t,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-white",children:"AI Study Assistant"}),s.jsx("p",{className:"text-purple-200",children:"Your intelligent study companion"})]})]}),s.jsx("button",{onClick:async()=>{h&&b("Chat cleared!")},className:"p-3 bg-white/10 hover:bg-white/20 rounded-lg border border-white/10 text-white transition-all duration-200 hover:scale-105",title:"Clear Chat",children:s.jsx(r,{className:"w-5 h-5"})})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:s.jsx("div",{className:"max-w-4xl mx-auto p-6",children:I?s.jsx("div",{className:"flex justify-center py-12",children:s.jsx(d,{size:"xl"})}):0===g.length?s.jsxs("div",{className:"text-center py-12",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx(t,{className:"w-20 h-20 text-purple-400 mx-auto mb-6"}),s.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"How can I help you study today?"}),s.jsx("p",{className:"text-purple-200 max-w-2xl mx-auto text-lg",children:"Ask me anything about your studies, get help with homework, create study plans, or just chat about your academic goals!"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-w-3xl mx-auto",children:[{icon:"📅",title:"Create Study Schedule",prompt:"Help me create a study schedule for my upcoming exams",gradient:"from-blue-500 to-purple-600"},{icon:"💪",title:"Get Motivated",prompt:"Give me some motivation to start studying",gradient:"from-green-500 to-blue-600"},{icon:"🍅",title:"Learn Pomodoro",prompt:"Explain the Pomodoro technique for better focus",gradient:"from-red-500 to-pink-600"},{icon:"🧩",title:"Break Down Topics",prompt:"Help me break down a complex topic into smaller parts",gradient:"from-yellow-500 to-orange-600"}].map((e,t)=>s.jsxs("button",{onClick:()=>v(e.prompt),className:`p-6 bg-gradient-to-r ${e.gradient} text-white rounded-xl hover:scale-105 transition-all duration-200 backdrop-blur-sm border border-white/10 shadow-lg`,children:[s.jsx("div",{className:"text-2xl mb-2",children:e.icon}),s.jsx("div",{className:"font-semibold",children:e.title})]},t))})]}):s.jsxs("div",{className:"space-y-6",children:[g.map(e=>{return s.jsx("div",{className:"flex "+("user"===e.role?"justify-end":"justify-start"),children:s.jsxs("div",{className:"flex items-start space-x-3 max-w-3xl "+("user"===e.role?"flex-row-reverse space-x-reverse":""),children:[s.jsx("div",{className:"p-2 rounded-full flex-shrink-0 "+("user"===e.role?"bg-gradient-to-r from-purple-500 to-pink-500":"bg-gradient-to-r from-blue-500 to-cyan-500"),children:"user"===e.role?s.jsx(a,{className:"w-5 h-5 text-white"}):s.jsx(l,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{className:"backdrop-blur-md rounded-xl p-4 shadow-lg border "+("user"===e.role?"bg-gradient-to-r from-purple-500/80 to-pink-500/80 border-purple-300/20 text-white":"bg-white/10 border-white/10 text-white"),children:[s.jsx("div",{dangerouslySetInnerHTML:{__html:(t=e.content,t.replace(/\*\*(.*?)\*\*/g,'<strong class="font-semibold text-white">$1</strong>').replace(/\*(.*?)\*/g,'<em class="italic">$1</em>').replace(/`(.*?)`/g,'<code class="bg-black/20 px-2 py-1 rounded text-sm font-mono">$1</code>').replace(/\n/g,"<br />"))},className:"prose prose-sm max-w-none text-current"}),s.jsxs("div",{className:"flex items-center justify-between mt-3 pt-2 border-t border-current/20",children:[s.jsx("span",{className:"text-xs opacity-70",children:e.timestamp?.toLocaleTimeString()}),s.jsx("button",{onClick:()=>(async e=>{try{await navigator.clipboard.writeText(e),b("Copied to clipboard!")}catch(s){f("Failed to copy to clipboard")}})(e.content),className:"p-1 rounded hover:bg-white/10 opacity-70 hover:opacity-100 transition-all",title:"Copy message",children:s.jsx(i,{className:"w-4 h-4"})})]})]})]})},e.id);var t}),k&&s.jsx("div",{className:"flex justify-start",children:s.jsxs("div",{className:"flex items-start space-x-3 max-w-3xl",children:[s.jsx("div",{className:"p-2 rounded-full bg-gradient-to-r from-blue-500 to-cyan-500 flex-shrink-0",children:s.jsx(l,{className:"w-5 h-5 text-white"})}),s.jsx("div",{className:"backdrop-blur-md bg-white/10 border border-white/10 rounded-xl p-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("div",{className:"flex space-x-1",children:[s.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce"}),s.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),s.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),s.jsx("span",{className:"text-purple-200 text-sm",children:"AI is thinking..."})]})})]})}),s.jsx("div",{ref:A})]})})}),s.jsx("div",{className:"backdrop-blur-md bg-white/10 border-t border-white/10 p-6 sticky bottom-0",children:s.jsx("div",{className:"max-w-4xl mx-auto",children:s.jsxs("div",{className:"flex items-end space-x-4",children:[s.jsx("div",{className:"flex-1",children:s.jsx("textarea",{ref:E,value:w,onChange:e=>v(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),z())},placeholder:"Ask me anything about your studies...",className:"w-full p-4 bg-white/10 backdrop-blur-md border border-white/20 rounded-xl text-white placeholder-purple-200 resize-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200",rows:1,disabled:y,style:{minHeight:"56px",maxHeight:"120px"}})}),s.jsx("button",{onClick:z,disabled:!w.trim()||y,className:"p-4 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl transition-all duration-200 hover:scale-105 flex items-center justify-center shadow-lg",children:y?s.jsx(d,{size:"sm"}):s.jsx(o,{className:"w-5 h-5"})})]})})})]}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-violet-900 via-purple-900 to-indigo-900 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(t,{className:"w-16 h-16 text-purple-400 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"AI Assistant"}),s.jsx("p",{className:"text-purple-200",children:"Please log in to use the AI Assistant"})]})})};export{h as default};
