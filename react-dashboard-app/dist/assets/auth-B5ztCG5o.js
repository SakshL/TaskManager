import{bb as e,bc as r,b7 as a,bd as s,be as i,bf as o,bg as n,bh as t,bi as c,bj as l,bk as u}from"./react-vendor-CvFIN_ac.js";import{c as d,d as h}from"./index-CJaCQS5E.js";const m=new t;let w=null;const g=r=>(w&&w.clear(),w=new e(d,r,{size:"invisible",callback:()=>{console.log("reCAPTCHA verified")},"expired-callback":()=>{console.log("reCAPTCHA expired")}}),w),y=async()=>{try{const e=await n(d,m);return console.log("User signed in:",e.user.displayName),await b(e.user),e.user}catch(e){throw console.error("Error signing in with Google:",e),e}},f=async(e,r)=>{try{const a=await i(d,e,r);if(console.log("User signed in with email:",a.user.email),!a.user.emailVerified)throw new Error("Please verify your email before signing in. Check your inbox for a verification link.");return a.user}catch(a){throw console.error("Error signing in with email:",a),a}},p=async(e,i,o)=>{try{const n=await r(d,e,i);return o&&await a(n.user,{displayName:o}),await s(n.user),await b(n.user),console.log("User created:",n.user.email),n.user}catch(n){throw console.error("Error creating user:",n),n}},b=async e=>{try{const r=c(h,"users",e.uid);(await l(r)).exists()||await u(r,{uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,createdAt:new Date,emailVerified:e.emailVerified})}catch(r){console.error("Error saving user to Firestore:",r)}},v=async(e,r)=>{try{return await o(d,e,r)}catch(a){throw console.error("Error sending phone verification:",a),a}},P=async(e,r)=>{try{const a=await e.confirm(r);return console.log("Phone verification successful:",a.user.phoneNumber),await b(a.user),a.user}catch(a){throw console.error("Error verifying phone code:",a),a}},k=e=>{const r=e?.code||"",a=e?.message||"";switch(r){case"auth/invalid-credential":case"auth/wrong-password":case"auth/user-not-found":return"Looks like something's off. Email or password might be incorrect.";case"auth/email-already-in-use":return"An account with this email already exists. Try signing in instead.";case"auth/weak-password":return"Please choose a stronger password (at least 6 characters).";case"auth/invalid-email":return"Please enter a valid email address.";case"auth/user-disabled":return"This account has been disabled. Please contact support.";case"auth/too-many-requests":return"Too many failed attempts. Please try again later.";case"auth/network-request-failed":return"Network error. Please check your internet connection.";case"auth/invalid-phone-number":return"Please enter a valid phone number.";case"auth/invalid-verification-code":return"Invalid verification code. Please try again.";case"auth/code-expired":return"Verification code has expired. Please request a new one.";case"auth/missing-phone-number":return"Please enter your phone number.";default:return a.includes("email")?"Please verify your email before signing in. Check your inbox for a verification link.":"Something went wrong. Please try again or contact support if the problem persists."}};export{f as a,v as b,y as c,k as g,g as i,p as s,P as v};
