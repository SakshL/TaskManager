import{r as e,j as t,bb as a,aS as s,aJ as r,aA as o,H as l,Z as d,av as i,aq as n,ax as c}from"./react-vendor-9sUWUj8V.js";import{c as m,L as x}from"./index-OjRGQQ76.js";import{s as g,g as p}from"./firestore-BtTgkdPP.js";const h=()=>{const{user:h}=m(),[u,b]=e.useState([]),[y,j]=e.useState([]),[f,k]=e.useState(!0),[N,v]=e.useState("week");e.useEffect(()=>{if(h){const e=g(h.uid,e=>{b(e),k(!1)});return w(),()=>e()}},[h]);const w=async()=>{if(h)try{const e=await p(h.uid);j(e)}catch(e){console.error("Error loading pomodoro data:",e)}},T=e.useMemo(()=>{const e=new Date,t=new Date;switch(N){case"week":t.setDate(e.getDate()-7);break;case"month":t.setMonth(e.getMonth()-1);break;case"year":t.setFullYear(e.getFullYear()-1)}const a=u.filter(e=>new Date(e.createdAt)>=t),s=y.filter(e=>new Date(e.startTime)>=t),r=a.filter(e=>"completed"===e.status),o=a.length>0?r.length/a.length*100:0,l=s.filter(e=>e.completed&&"work"===e.type).reduce((e,t)=>e+t.duration,0),d=[];for(let g=6;g>=0;g--){const e=new Date;e.setDate(e.getDate()-g);const t=u.filter(t=>new Date(t.createdAt).toDateString()===e.toDateString()),a=t.filter(e=>"completed"===e.status).length,s=y.filter(t=>new Date(t.startTime).toDateString()===e.toDateString()&&t.completed).length;d.push({date:e.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),tasks:t.length,completed:a,pomodoros:s,focusTime:y.filter(t=>new Date(t.startTime).toDateString()===e.toDateString()&&t.completed&&"work"===t.type).reduce((e,t)=>e+t.duration,0)})}const i=u.reduce((e,t)=>(e[t.subject]||(e[t.subject]={total:0,completed:0}),e[t.subject].total++,"completed"===t.status&&e[t.subject].completed++,e),{}),n=u.reduce((e,t)=>(e[t.priority]||(e[t.priority]={total:0,completed:0}),e[t.priority].total++,"completed"===t.status&&e[t.priority].completed++,e),{}),c=d.reduce((e,t)=>e+t.tasks,0)/7,m=d.reduce((e,t)=>e+t.pomodoros,0)/7,x=d.reduce((e,t)=>e+t.focusTime,0)/7;return{totalTasks:a.length,completedTasks:r.length,completionRate:o,totalFocusTime:l,totalPomodoros:s.filter(e=>e.completed).length,dailyData:d,subjectStats:i,priorityStats:n,avgTasksPerDay:c,avgPomodorosPerDay:m,avgFocusTimePerDay:x}},[u,y,N]);if(f)return t.jsx("div",{className:"flex items-center justify-center min-h-screen",children:t.jsx(x,{size:"xl",text:"Loading your analytics..."})});const D=(P=T.completionRate)>=90?{grade:"A+",color:"text-green-600",bg:"bg-green-100"}:P>=80?{grade:"A",color:"text-green-600",bg:"bg-green-100"}:P>=70?{grade:"B",color:"text-blue-600",bg:"bg-blue-100"}:P>=60?{grade:"C",color:"text-yellow-600",bg:"bg-yellow-100"}:{grade:"D",color:"text-red-600",bg:"bg-red-100"};var P;return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 via-teal-50 to-cyan-50 dark:from-emerald-900 dark:via-teal-900 dark:to-cyan-900 p-4 sm:p-6 lg:p-8",children:t.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[t.jsxs("div",{className:"text-center mb-8","data-aos":"fade-down",children:[t.jsx("h1",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-emerald-600 via-teal-600 to-cyan-600 bg-clip-text text-transparent mb-4",children:"Performance Analytics"}),t.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:"Discover insights about your productivity and learning progress 📊"})]}),t.jsx("div",{className:"glass rounded-3xl p-6 border border-white/20 mb-8","data-aos":"fade-up",children:t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(a,{className:"w-5 h-5 text-gray-600"}),t.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Time Period:"}),t.jsx("div",{className:"flex gap-2",children:["week","month","year"].map(e=>t.jsxs("button",{onClick:()=>v(e),className:"px-4 py-2 rounded-xl font-medium transition-all duration-200 "+(N===e?"bg-emerald-500 text-white shadow-lg":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"),children:["Last ",e]},e))})]}),t.jsxs("button",{onClick:()=>{const e=`\nTASKTIDE ANALYTICS REPORT\n========================\nPeriod: Last ${N}\nGenerated: ${(new Date).toLocaleString()}\n\nOVERVIEW\n--------\nTotal Tasks: ${T.totalTasks}\nCompleted Tasks: ${T.completedTasks}\nCompletion Rate: ${T.completionRate.toFixed(1)}%\nTotal Focus Time: ${Math.round(T.totalFocusTime/60)}h ${T.totalFocusTime%60}m\nTotal Pomodoros: ${T.totalPomodoros}\n\nDAILY AVERAGES\n--------------\nTasks per day: ${T.avgTasksPerDay.toFixed(1)}\nPomodoros per day: ${T.avgPomodorosPerDay.toFixed(1)}\nFocus time per day: ${Math.round(T.avgFocusTimePerDay)}m\n\nSUBJECT BREAKDOWN\n-----------------\n${Object.entries(T.subjectStats).map(([e,t])=>`${e}: ${t.completed}/${t.total} (${(t.completed/t.total*100).toFixed(1)}%)`).join("\n")}\n\nDAILY BREAKDOWN\n---------------\n${T.dailyData.map(e=>`${e.date}: ${e.completed}/${e.tasks} tasks, ${e.pomodoros} pomodoros, ${e.focusTime}m focus`).join("\n")}\n`,t=new Blob([e],{type:"text/plain"}),a=URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download=`tasktide-analytics-${(new Date).toISOString().split("T")[0]}.txt`,s.click(),URL.revokeObjectURL(a)},className:"px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-colors duration-200 flex items-center gap-2",children:[t.jsx(s,{className:"w-4 h-4"}),"Export Report"]})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[t.jsxs("div",{className:"glass rounded-3xl p-6 border border-white/20 text-center","data-aos":"fade-up",children:[t.jsx("div",{className:"flex items-center justify-center mb-4",children:t.jsx("div",{className:`p-4 rounded-full ${D.bg}`,children:t.jsx(r,{className:`w-8 h-8 ${D.color}`})})}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Overall Grade"}),t.jsx("div",{className:`text-3xl font-bold ${D.color} mb-2`,children:D.grade}),t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[T.completionRate.toFixed(1),"% completion rate"]})]}),t.jsxs("div",{className:"glass rounded-3xl p-6 border border-white/20","data-aos":"fade-up","data-aos-delay":"100",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-3 rounded-xl bg-green-100 dark:bg-green-900/30",children:t.jsx(o,{className:"w-6 h-6 text-green-600"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Tasks Completed"}),t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["This ",N]})]})]}),t.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:T.completedTasks}),t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["of ",T.totalTasks," total tasks"]})]}),t.jsxs("div",{className:"glass rounded-3xl p-6 border border-white/20","data-aos":"fade-up","data-aos-delay":"200",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-3 rounded-xl bg-purple-100 dark:bg-purple-900/30",children:t.jsx(l,{className:"w-6 h-6 text-purple-600"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Focus Time"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total minutes"})]})]}),t.jsxs("div",{className:"text-3xl font-bold text-purple-600 mb-2",children:[Math.round(T.totalFocusTime/60),"h ",T.totalFocusTime%60,"m"]}),t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[T.totalPomodoros," pomodoro sessions"]})]}),t.jsxs("div",{className:"glass rounded-3xl p-6 border border-white/20","data-aos":"fade-up","data-aos-delay":"300",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-3 rounded-xl bg-orange-100 dark:bg-orange-900/30",children:t.jsx(d,{className:"w-6 h-6 text-orange-600"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Daily Average"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Tasks per day"})]})]}),t.jsx("div",{className:"text-3xl font-bold text-orange-600 mb-2",children:T.avgTasksPerDay.toFixed(1)}),t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[T.avgPomodorosPerDay.toFixed(1)," pomodoros/day"]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"glass rounded-3xl p-6 border border-white/20","data-aos":"fade-up",children:[t.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-2",children:[t.jsx(i,{className:"w-6 h-6 text-blue-600"}),"Daily Progress"]}),t.jsx("div",{className:"space-y-4",children:T.dailyData.map((e,a)=>t.jsxs("div",{className:"space-y-2","data-aos":"slide-right","data-aos-delay":100*a,children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e.date}),t.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.completed,"/",e.tasks]})]}),t.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3",children:t.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-emerald-500 h-3 rounded-full transition-all duration-500",style:{width:(e.tasks>0?e.completed/e.tasks*100:0)+"%"}})}),t.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400",children:[t.jsxs("span",{children:[e.pomodoros," sessions"]}),t.jsxs("span",{children:[e.focusTime,"m focus"]})]})]},e.date))})]}),t.jsxs("div",{className:"glass rounded-3xl p-6 border border-white/20","data-aos":"fade-up","data-aos-delay":"200",children:[t.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-2",children:[t.jsx(n,{className:"w-6 h-6 text-purple-600"}),"Subject Performance"]}),t.jsxs("div",{className:"space-y-4",children:[Object.entries(T.subjectStats).map(([e,a],s)=>{const r=a.total>0?a.completed/a.total*100:0;return t.jsxs("div",{className:"space-y-2","data-aos":"slide-left","data-aos-delay":100*s,children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 capitalize",children:e}),t.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[r.toFixed(0),"%"]})]}),t.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3",children:t.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 h-3 rounded-full transition-all duration-500",style:{width:`${r}%`}})}),t.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400",children:[t.jsxs("span",{children:[a.completed," completed"]}),t.jsxs("span",{children:[a.total," total"]})]})]},e)}),0===Object.keys(T.subjectStats).length&&t.jsxs("div",{className:"text-center py-8",children:[t.jsx(n,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No subject data available"})]})]})]})]}),t.jsxs("div",{className:"glass rounded-3xl p-8 border border-white/20","data-aos":"fade-up",children:[t.jsxs("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-2",children:[t.jsx(c,{className:"w-8 h-8 text-emerald-600"}),"Insights & Recommendations"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"p-6 rounded-2xl bg-gradient-to-br from-emerald-50 to-teal-50 dark:from-emerald-900/30 dark:to-teal-900/30 border border-emerald-200 dark:border-emerald-700",children:[t.jsx("h4",{className:"font-bold text-emerald-800 dark:text-emerald-200 mb-3",children:"🎯 Productivity"}),t.jsx("p",{className:"text-sm text-emerald-700 dark:text-emerald-300 mb-2",children:T.completionRate>=80?"Excellent work! You're consistently hitting your targets.":T.completionRate>=60?"Good progress! Try breaking larger tasks into smaller chunks.":"Consider setting more realistic daily goals to build momentum."}),t.jsxs("p",{className:"text-xs text-emerald-600 dark:text-emerald-400",children:["Current completion rate: ",T.completionRate.toFixed(1),"%"]})]}),t.jsxs("div",{className:"p-6 rounded-2xl bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/30 dark:to-pink-900/30 border border-purple-200 dark:border-purple-700",children:[t.jsx("h4",{className:"font-bold text-purple-800 dark:text-purple-200 mb-3",children:"⏰ Focus Time"}),t.jsx("p",{className:"text-sm text-purple-700 dark:text-purple-300 mb-2",children:T.avgFocusTimePerDay>=120?"Great focus! You're maintaining excellent concentration habits.":T.avgFocusTimePerDay>=60?"Good focus time! Try adding one more Pomodoro session per day.":"Consider using the Pomodoro technique to improve focus duration."}),t.jsxs("p",{className:"text-xs text-purple-600 dark:text-purple-400",children:["Daily average: ",Math.round(T.avgFocusTimePerDay)," minutes"]})]}),t.jsxs("div",{className:"p-6 rounded-2xl bg-gradient-to-br from-orange-50 to-yellow-50 dark:from-orange-900/30 dark:to-yellow-900/30 border border-orange-200 dark:border-orange-700",children:[t.jsx("h4",{className:"font-bold text-orange-800 dark:text-orange-200 mb-3",children:"🔥 Consistency"}),t.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-300 mb-2",children:T.avgTasksPerDay>=3?"Fantastic consistency! You're building strong productivity habits.":T.avgTasksPerDay>=1?"Good daily rhythm! Try to maintain this consistency.":"Start with small daily goals to build a consistent habit."}),t.jsxs("p",{className:"text-xs text-orange-600 dark:text-orange-400",children:["Daily task average: ",T.avgTasksPerDay.toFixed(1)," tasks"]})]})]})]})]})})};export{h as default};
