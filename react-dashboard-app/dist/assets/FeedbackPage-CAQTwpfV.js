import{r as e,j as r,v as t,bU as s,bV as a,c as l,bW as d,ao as i,bK as o,bG as c}from"./react-vendor-CimZ8x-k.js";import{b as n,d as u}from"./index-CE1QBjke.js";const b=()=>{const{user:b}=n(),[x,m]=e.useState({type:"general",subject:"",description:"",priority:"medium"}),[g,h]=e.useState(!1),[y,p]=e.useState(null),j=(e,r)=>{m(t=>({...t,[e]:r}))},f=e=>{switch(e){case"bug":return r.jsx(l,{className:"w-5 h-5 text-red-500"});case"feature":return r.jsx(t,{className:"w-5 h-5 text-blue-500"});default:return r.jsx(t,{className:"w-5 h-5 text-green-500"})}};return r.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4 flex items-center justify-center",children:[r.jsx(t,{className:"w-8 h-8 mr-3 text-blue-600"}),"Feedback & Bug Report"]}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 max-w-2xl mx-auto",children:"Help us improve TaskTide! Report bugs, suggest features, or share your general feedback. Your input is valuable to us."})]}),r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Feedback Type"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[{value:"bug",label:"Bug Report",desc:"Something is broken or not working"},{value:"feature",label:"Feature Request",desc:"Suggest a new feature or improvement"},{value:"general",label:"General Feedback",desc:"Share your thoughts or experience"}].map(e=>r.jsxs("button",{onClick:()=>j("type",e.value),className:"p-4 border-2 rounded-lg text-left transition-colors "+(x.type===e.value?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"),children:[r.jsxs("div",{className:"flex items-center mb-2",children:[f(e.value),r.jsx("span",{className:"ml-2 font-medium text-gray-900 dark:text-white",children:e.label})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.desc})]},e.value))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Priority"}),r.jsxs("select",{value:x.priority,onChange:e=>j("priority",e.target.value),className:"w-full md:w-48 border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[r.jsx("option",{value:"low",children:"Low"}),r.jsx("option",{value:"medium",children:"Medium"}),r.jsx("option",{value:"high",children:"High"})]}),r.jsx("div",{className:"mt-2",children:r.jsxs("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full border ${(e=>{switch(e){case"high":return"bg-red-100 text-red-800 border-red-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}})(x.priority)}`,children:[x.priority.charAt(0).toUpperCase()+x.priority.slice(1)," Priority"]})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Subject *"}),r.jsx("input",{type:"text",value:x.subject,onChange:e=>j("subject",e.target.value),placeholder:"Brief summary of your feedback",className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description *"}),r.jsx("textarea",{value:x.description,onChange:e=>j("description",e.target.value),placeholder:"bug"===x.type?"Please describe the bug, including steps to reproduce it...":"feature"===x.type?"Describe the feature you would like to see...":"Share your feedback, thoughts, or suggestions...",rows:6,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 resize-vertical",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Screenshot (Optional)"}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("button",{type:"button",onClick:async()=>{try{const e=(await d(document.body,{height:window.innerHeight,width:window.innerWidth,scrollX:0,scrollY:0})).toDataURL("image/png");p(e),m(r=>({...r,screenshot:e})),i.success("Screenshot captured!")}catch(e){console.error("Error capturing screenshot:",e),i.error("Failed to capture screenshot")}},className:"flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:[r.jsx(s,{className:"w-5 h-5 mr-2"}),"Capture Screenshot"]}),y&&r.jsxs("div",{className:"flex items-center text-sm text-green-600 dark:text-green-400",children:[r.jsx("span",{children:"Screenshot captured"}),r.jsx("button",{onClick:()=>{p(null),m(e=>({...e,screenshot:void 0}))},className:"ml-2 text-red-600 hover:text-red-700",children:"Remove"})]})]}),y&&r.jsx("div",{className:"mt-4",children:r.jsx("img",{src:y,alt:"Screenshot",className:"max-w-full h-auto max-h-64 rounded-lg border border-gray-200 dark:border-gray-600"})})]}),r.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200 dark:border-gray-700",children:r.jsx("button",{onClick:async()=>{if(b)if(x.subject.trim()&&x.description.trim()){h(!0);try{const e={...x,userId:b.uid,userEmail:b.email,userName:b.displayName||"Anonymous",timestamp:(new Date).toISOString(),status:"open",createdAt:new Date};await o(c(u,"feedback"),e),i.success("Feedback submitted successfully! Thank you for your input."),m({type:"general",subject:"",description:"",priority:"medium"}),p(null)}catch(e){console.error("Error submitting feedback:",e),i.error("Failed to submit feedback. Please try again.")}finally{h(!1)}}else i.error("Please fill in all required fields");else i.error("Please login to submit feedback")},disabled:g||!x.subject.trim()||!x.description.trim(),className:"flex items-center px-6 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg font-medium transition-colors",children:g?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Submitting..."]}):r.jsxs(r.Fragment,{children:[r.jsx(a,{className:"w-5 h-5 mr-2"}),"Submit Feedback"]})})})]})}),r.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[r.jsx("h3",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2",children:"Tips for effective feedback:"}),r.jsxs("ul",{className:"text-sm text-blue-800 dark:text-blue-200 space-y-1",children:[r.jsx("li",{children:"• Be specific and descriptive in your subject line"}),r.jsx("li",{children:"• For bugs: Include steps to reproduce the issue"}),r.jsx("li",{children:"• For features: Explain how it would benefit your workflow"}),r.jsx("li",{children:"• Screenshots help us understand visual issues better"}),r.jsx("li",{children:"• We review all feedback and will respond when possible"})]})]})]})};export{b as default};
