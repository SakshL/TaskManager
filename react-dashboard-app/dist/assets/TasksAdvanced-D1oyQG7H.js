import{r as e,j as r,aK as a,ar as t,aL as s,aM as d,au as l,H as i,aq as o,aN as n,aO as c,aA as u}from"./react-vendor-9sUWUj8V.js";import{c as x,b as g,L as p}from"./index-OjRGQQ76.js";import{s as m,d as b,c as h,u as y}from"./firestore-BtTgkdPP.js";import{M as f}from"./Modal-CJf2K3_O.js";const j=()=>{const{user:j}=x(),{success:k,error:w}=g(),[v,N]=e.useState([]),[C,T]=e.useState(!0),[D,S]=e.useState(""),[L,A]=e.useState("all"),[E,M]=e.useState("all"),[O,F]=e.useState("deadline"),[H,P]=e.useState(!1),[z,I]=e.useState(null),[$,q]=e.useState({title:"",description:"",subject:"",priority:"medium",deadline:"",estimatedTime:60,tags:[]});e.useEffect(()=>{if(j){const e=m(j.uid,e=>{N(e),T(!1)});return()=>e()}},[j]);const U=e.useMemo(()=>{let e=v.filter(e=>{const r=e.title.toLowerCase().includes(D.toLowerCase())||e.description?.toLowerCase().includes(D.toLowerCase())||e.subject.toLowerCase().includes(D.toLowerCase()),a="all"===L||e.status===L,t="all"===E||e.priority===E;return r&&a&&t});return e.sort((e,r)=>{switch(O){case"deadline":return e.deadline||r.deadline?e.deadline?r.deadline?new Date(e.deadline).getTime()-new Date(r.deadline).getTime():-1:1:0;case"priority":const a={high:3,medium:2,low:1};return a[r.priority]-a[e.priority];case"created":return new Date(r.createdAt).getTime()-new Date(e.createdAt).getTime();case"updated":return new Date(r.updatedAt).getTime()-new Date(e.updatedAt).getTime();default:return 0}}),e},[v,D,L,E,O]),K=e=>{const r=["todo","in-progress","completed"],a=r.indexOf(e.status),t=r[(a+1)%r.length];(async(e,r)=>{try{await y(e,{...r,updatedAt:new Date}),k("Updated!","Task updated successfully")}catch(a){console.error("Error updating task:",a),w("Error","Failed to update task")}})(e.id,{status:t})},Y=e=>{switch(e){case"completed":return r.jsx(u,{className:"w-5 h-5 text-green-500"});case"in-progress":return r.jsx(c,{className:"w-5 h-5 text-orange-500"});default:return r.jsx(n,{className:"w-5 h-5 text-gray-400"})}},B=e=>{switch(e){case"high":return"bg-red-100 text-red-700 border-red-200 dark:bg-red-900/30 dark:text-red-300";case"medium":return"bg-yellow-100 text-yellow-700 border-yellow-200 dark:bg-yellow-900/30 dark:text-yellow-300";case"low":return"bg-green-100 text-green-700 border-green-200 dark:bg-green-900/30 dark:text-green-300";default:return"bg-gray-100 text-gray-700 border-gray-200 dark:bg-gray-900/30 dark:text-gray-300"}},G=e=>!!e&&(new Date(e)<new Date&&new Date(e).toDateString()!==(new Date).toDateString());return C?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx(p,{size:"xl",text:"Loading your tasks..."})}):r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-purple-50 to-indigo-50 dark:from-slate-900 dark:via-purple-900 dark:to-indigo-900 p-4 sm:p-6 lg:p-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[r.jsxs("div",{className:"text-center mb-8","data-aos":"fade-down",children:[r.jsx("h1",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 bg-clip-text text-transparent mb-4",children:"Task Manager"}),r.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:"Organize, prioritize, and conquer your tasks with style! 📝"})]}),r.jsxs("div",{className:"glass rounded-3xl p-6 border border-white/20 mb-8","data-aos":"fade-up",children:[r.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between mb-6",children:[r.jsxs("div",{className:"relative flex-1 max-w-md",children:[r.jsx(a,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"text",placeholder:"Search tasks...",value:D,onChange:e=>S(e.target.value),className:"w-full pl-10 pr-4 py-3 rounded-2xl border border-gray-200 dark:border-gray-600 bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200"})]}),r.jsxs("button",{onClick:()=>P(!0),className:"px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-2xl font-semibold hover:scale-105 transition-transform duration-200 flex items-center gap-2 shadow-lg",children:[r.jsx(t,{className:"w-5 h-5"}),"Create Task"]})]}),r.jsxs("div",{className:"flex flex-wrap gap-4",children:[r.jsxs("select",{value:L,onChange:e=>A(e.target.value),className:"px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-600 bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"todo",children:"To Do"}),r.jsx("option",{value:"in-progress",children:"In Progress"}),r.jsx("option",{value:"completed",children:"Completed"})]}),r.jsxs("select",{value:E,onChange:e=>M(e.target.value),className:"px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-600 bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[r.jsx("option",{value:"all",children:"All Priority"}),r.jsx("option",{value:"high",children:"High"}),r.jsx("option",{value:"medium",children:"Medium"}),r.jsx("option",{value:"low",children:"Low"})]}),r.jsxs("select",{value:O,onChange:e=>F(e.target.value),className:"px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-600 bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[r.jsx("option",{value:"deadline",children:"Sort by Deadline"}),r.jsx("option",{value:"priority",children:"Sort by Priority"}),r.jsx("option",{value:"created",children:"Sort by Created"}),r.jsx("option",{value:"updated",children:"Sort by Updated"})]})]})]}),r.jsx("div",{className:"space-y-4",children:U.length>0?U.map((e,a)=>r.jsx("div",{className:`glass rounded-3xl p-6 border border-white/20 hover:scale-[1.02] transition-all duration-300 hover:shadow-xl ${"completed"===e.status?"opacity-75":""} ${G(e.deadline)?"border-red-300 bg-red-50/50 dark:bg-red-900/20":""}`,"data-aos":"fade-up","data-aos-delay":50*a,children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("button",{onClick:()=>K(e),className:"mt-1 hover:scale-110 transition-transform duration-200",children:Y(e.status)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-start justify-between gap-4 mb-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2 "+("completed"===e.status?"line-through opacity-60":""),children:e.title}),e.description&&r.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-3",children:e.description})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>I(e),className:"p-2 rounded-xl bg-blue-100 dark:bg-blue-900/30 text-blue-600 hover:scale-110 transition-transform duration-200",children:r.jsx(s,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>(async e=>{try{await b(e),k("Deleted!","Task deleted successfully")}catch(r){console.error("Error deleting task:",r),w("Error","Failed to delete task")}})(e.id),className:"p-2 rounded-xl bg-red-100 dark:bg-red-900/30 text-red-600 hover:scale-110 transition-transform duration-200",children:r.jsx(d,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[r.jsxs("span",{className:`px-3 py-1 rounded-xl text-sm font-medium border ${B(e.priority)}`,children:[e.priority," priority"]}),r.jsx("span",{className:"px-3 py-1 rounded-xl text-sm font-medium bg-blue-100 text-blue-700 border border-blue-200 dark:bg-blue-900/30 dark:text-blue-300",children:e.subject}),e.deadline&&r.jsxs("div",{className:"flex items-center gap-1 px-3 py-1 rounded-xl text-sm font-medium "+(G(e.deadline)?"bg-red-100 text-red-700 border border-red-200 dark:bg-red-900/30 dark:text-red-300":"bg-green-100 text-green-700 border border-green-200 dark:bg-green-900/30 dark:text-green-300"),children:[r.jsx(l,{className:"w-4 h-4"}),new Date(e.deadline).toLocaleDateString(),G(e.deadline)&&" (Overdue)"]}),e.estimatedTime&&r.jsxs("div",{className:"flex items-center gap-1 px-3 py-1 rounded-xl text-sm font-medium bg-purple-100 text-purple-700 border border-purple-200 dark:bg-purple-900/30 dark:text-purple-300",children:[r.jsx(i,{className:"w-4 h-4"}),e.estimatedTime,"min"]})]})]})]})},e.id)):r.jsxs("div",{className:"text-center py-16",children:[r.jsx("div",{className:"w-24 h-24 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx(o,{className:"w-12 h-12 text-purple-600"})}),r.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"No tasks found"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:D||"all"!==L||"all"!==E?"Try adjusting your filters or search term":"Create your first task to get started!"}),!D&&"all"===L&&"all"===E&&r.jsxs("button",{onClick:()=>P(!0),className:"px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-2xl font-semibold hover:scale-105 transition-transform duration-200 inline-flex items-center gap-2",children:[r.jsx(t,{className:"w-5 h-5"}),"Create Your First Task"]})]})}),r.jsx(f,{isOpen:H,onClose:()=>P(!1),title:"Create New Task",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Title *"}),r.jsx("input",{type:"text",value:$.title,onChange:e=>q({...$,title:e.target.value}),className:"w-full px-4 py-3 rounded-2xl border border-gray-200 dark:border-gray-600 bg-white/50 dark:bg-gray-800/50 focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter task title..."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),r.jsx("textarea",{value:$.description,onChange:e=>q({...$,description:e.target.value}),rows:3,className:"w-full px-4 py-3 rounded-2xl border border-gray-200 dark:border-gray-600 bg-white/50 dark:bg-gray-800/50 focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter task description..."})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Subject"}),r.jsx("input",{type:"text",value:$.subject,onChange:e=>q({...$,subject:e.target.value}),className:"w-full px-4 py-3 rounded-2xl border border-gray-200 dark:border-gray-600 bg-white/50 dark:bg-gray-800/50 focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"e.g., Math, History..."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Priority"}),r.jsxs("select",{value:$.priority,onChange:e=>q({...$,priority:e.target.value}),className:"w-full px-4 py-3 rounded-2xl border border-gray-200 dark:border-gray-600 bg-white/50 dark:bg-gray-800/50 focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[r.jsx("option",{value:"low",children:"Low"}),r.jsx("option",{value:"medium",children:"Medium"}),r.jsx("option",{value:"high",children:"High"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Deadline"}),r.jsx("input",{type:"datetime-local",value:$.deadline,onChange:e=>q({...$,deadline:e.target.value}),className:"w-full px-4 py-3 rounded-2xl border border-gray-200 dark:border-gray-600 bg-white/50 dark:bg-gray-800/50 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estimated Time (minutes)"}),r.jsx("input",{type:"number",value:$.estimatedTime,onChange:e=>q({...$,estimatedTime:parseInt(e.target.value)||0}),className:"w-full px-4 py-3 rounded-2xl border border-gray-200 dark:border-gray-600 bg-white/50 dark:bg-gray-800/50 focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"60"})]})]}),r.jsxs("div",{className:"flex gap-4 pt-4",children:[r.jsx("button",{onClick:()=>P(!1),className:"flex-1 px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-2xl font-semibold hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors duration-200",children:"Cancel"}),r.jsx("button",{onClick:async()=>{if(j&&$.title.trim())try{const e={...$,userId:j.uid,status:"todo",deadline:$.deadline?new Date($.deadline):void 0,createdAt:new Date,updatedAt:new Date};await h(e),P(!1),q({title:"",description:"",subject:"",priority:"medium",deadline:"",estimatedTime:60,tags:[]}),k("Success!","Task created successfully")}catch(e){console.error("Error creating task:",e),w("Error","Failed to create task")}},disabled:!$.title.trim(),className:"flex-1 px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-2xl font-semibold hover:scale-105 transition-transform duration-200 disabled:opacity-50 disabled:hover:scale-100",children:"Create Task"})]})]})})]})})};export{j as default};
