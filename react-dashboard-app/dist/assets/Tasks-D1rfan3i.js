import{r as e,j as s,P as t,O as r,Q as l,K as a,F as i,V as o,W as d,Y as n,a as c,X as x}from"./react-vendor-BiMSSdjs.js";import{u,a as m,C as h,L as b}from"./index-rZ25EgeA.js";import{s as g,u as p,h as j,d as f,c as y}from"./firestore-SczCEyBG.js";const v=()=>{const{user:v}=u(),{success:N,error:w}=m(),[k,C]=e.useState([]),[T,S]=e.useState(!0),[E,L]=e.useState(!1),[P,D]=e.useState(null),[I,M]=e.useState(""),[A,z]=e.useState("all"),[O,U]=e.useState("all"),[Y,$]=e.useState([]),[q,H]=e.useState(!1),[R,W]=e.useState({title:"",description:"",deadline:"",priority:"medium",subject:"",status:"todo",estimatedTime:""});e.useEffect(()=>{if(v){S(!0);const e=g(v.uid,e=>{C(e),S(!1)});return()=>e()}},[v]);const F=e.useMemo(()=>k.filter(e=>{const s=e.title.toLowerCase().includes(I.toLowerCase())||e.description?.toLowerCase().includes(I.toLowerCase())||e.subject?.toLowerCase().includes(I.toLowerCase()),t="all"===A||e.status===A,r="all"===O||e.priority===O,l=0===Y.length||e.tags&&Y.some(s=>e.tags?.includes(s));return s&&t&&r&&l}),[k,I,A,O,Y]);e.useMemo(()=>{const e=new Set;return k.forEach(s=>{s.tags?.forEach(s=>e.add(s))}),Array.from(e)},[k]);const K=e.useCallback(async(e,s)=>{const t="completed"===s?"todo":"completed";try{await p(e,{status:t}),N("Task Updated",`Task marked as ${t}`)}catch(r){w("Error",j(r))}},[N,w]),Q=e.useCallback(async e=>{if(confirm("Are you sure you want to delete this task?"))try{await f(e),N("Task Deleted","Task has been deleted successfully")}catch(s){w("Error",j(s))}},[N,w]),V=e.useCallback(()=>{W({title:"",description:"",deadline:"",priority:"medium",subject:"",status:"todo",estimatedTime:""})},[]),B=()=>{D(null),V(),L(!0)},G={total:k.length,todo:k.filter(e=>"todo"===e.status).length,inProgress:k.filter(e=>"in-progress"===e.status).length,completed:k.filter(e=>"completed"===e.status).length},J=e=>{switch(e){case"high":return"bg-red-100 text-red-800 border-red-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},X=e=>{switch(e){case"completed":return"bg-green-100 text-green-800 border-green-200";case"in-progress":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return T?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 p-8",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(e=>s.jsx(h,{},e))})})}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 p-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:"Task Manager"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Organize and track your tasks efficiently"})]}),s.jsxs("button",{onClick:B,className:"mt-4 md:mt-0 flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-2xl font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl",children:[s.jsx(t,{className:"w-5 h-5"}),s.jsx("span",{children:"New Task"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[s.jsx("div",{className:"bg-white/80 backdrop-blur-md rounded-2xl p-6 border border-white/20 shadow-xl",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Tasks"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:G.total})]}),s.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl flex items-center justify-center",children:s.jsx(r,{className:"w-6 h-6 text-white"})})]})}),s.jsx("div",{className:"bg-white/80 backdrop-blur-md rounded-2xl p-6 border border-white/20 shadow-xl",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"To Do"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:G.todo})]}),s.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-gray-500 to-gray-600 rounded-xl flex items-center justify-center",children:s.jsx(l,{className:"w-6 h-6 text-white"})})]})}),s.jsx("div",{className:"bg-white/80 backdrop-blur-md rounded-2xl p-6 border border-white/20 shadow-xl",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"In Progress"}),s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:G.inProgress})]}),s.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl flex items-center justify-center",children:s.jsx(a,{className:"w-6 h-6 text-white"})})]})}),s.jsx("div",{className:"bg-white/80 backdrop-blur-md rounded-2xl p-6 border border-white/20 shadow-xl",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Completed"}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:G.completed})]}),s.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-green-500 to-green-600 rounded-xl flex items-center justify-center",children:s.jsx(i,{className:"w-6 h-6 text-white"})})]})})]}),s.jsx("div",{className:"bg-white/80 backdrop-blur-md rounded-2xl p-6 border border-white/20 shadow-xl mb-6",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(o,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search tasks...",value:I,onChange:e=>M(e.target.value),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 transition-colors"})]}),s.jsxs("select",{value:A,onChange:e=>z(e.target.value),className:"px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 transition-colors",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"todo",children:"To Do"}),s.jsx("option",{value:"in-progress",children:"In Progress"}),s.jsx("option",{value:"completed",children:"Completed"})]}),s.jsxs("select",{value:O,onChange:e=>U(e.target.value),className:"px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 transition-colors",children:[s.jsx("option",{value:"all",children:"All Priority"}),s.jsx("option",{value:"high",children:"High"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"low",children:"Low"})]})]})})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:F.map(e=>s.jsxs("div",{className:"bg-white/80 backdrop-blur-md rounded-2xl p-6 border border-white/20 shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:scale-105",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>K(e.id,e.status),className:"text-gray-400 hover:text-green-500 transition-colors",children:"completed"===e.status?s.jsx(i,{className:"w-6 h-6 text-green-500"}):s.jsx(l,{className:"w-6 h-6"})}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${J(e.priority)}`,children:e.priority})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>(e=>{D(e),W({title:e.title,description:e.description||"",deadline:e.deadline?e.deadline.toISOString().split("T")[0]:"",priority:e.priority,subject:e.subject,status:e.status,estimatedTime:e.estimatedTime?.toString()||""}),L(!0)})(e),className:"p-2 text-gray-400 hover:text-blue-500 hover:bg-blue-50 rounded-lg transition-all",children:s.jsx(d,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>Q(e.id),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-all",children:s.jsx(n,{className:"w-4 h-4"})})]})]}),s.jsx("h3",{className:"text-lg font-semibold mb-2 "+("completed"===e.status?"line-through text-gray-500":"text-gray-900"),children:e.title}),e.description&&s.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:e.description}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-3",children:[s.jsxs("span",{className:"flex items-center space-x-1",children:[s.jsx(r,{className:"w-4 h-4"}),s.jsx("span",{children:e.subject})]}),e.estimatedTime&&s.jsxs("span",{className:"flex items-center space-x-1",children:[s.jsx(a,{className:"w-4 h-4"}),s.jsxs("span",{children:[e.estimatedTime,"m"]})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${X(e.status)}`,children:e.status.replace("-"," ")}),e.deadline&&s.jsxs("span",{className:"flex items-center space-x-1 text-xs text-gray-500",children:[s.jsx(c,{className:"w-4 h-4"}),s.jsx("span",{children:e.deadline.toLocaleDateString()})]})]})]},e.id))}),0===F.length&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(r,{className:"w-12 h-12 text-gray-400"})}),s.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No tasks found"}),s.jsx("p",{className:"text-gray-500 mb-6",children:"Create your first task to get started!"}),s.jsx("button",{onClick:B,className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-2xl font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-300 transform hover:scale-105",children:"Create Task"})]}),E&&s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:P?"Edit Task":"Create New Task"}),s.jsx("button",{onClick:()=>L(!1),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-all",children:s.jsx(x,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),s.jsx("input",{type:"text",value:R.title,onChange:e=>W({...R,title:e.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 transition-colors",placeholder:"Enter task title..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),s.jsx("textarea",{value:R.description,onChange:e=>W({...R,description:e.target.value}),rows:3,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 transition-colors",placeholder:"Enter task description..."})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),s.jsxs("select",{value:R.priority,onChange:e=>W({...R,priority:e.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 transition-colors",children:[s.jsx("option",{value:"low",children:"Low"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"high",children:"High"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),s.jsxs("select",{value:R.status,onChange:e=>W({...R,status:e.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 transition-colors",children:[s.jsx("option",{value:"todo",children:"To Do"}),s.jsx("option",{value:"in-progress",children:"In Progress"}),s.jsx("option",{value:"completed",children:"Completed"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject"}),s.jsx("input",{type:"text",value:R.subject,onChange:e=>W({...R,subject:e.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 transition-colors",placeholder:"e.g., Math, Science, Work..."})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deadline"}),s.jsx("input",{type:"date",value:R.deadline,onChange:e=>W({...R,deadline:e.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 transition-colors"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Est. Time (min)"}),s.jsx("input",{type:"number",value:R.estimatedTime,onChange:e=>W({...R,estimatedTime:e.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 transition-colors",placeholder:"60"})]})]})]}),s.jsxs("div",{className:"flex space-x-3 mt-6",children:[s.jsx("button",{onClick:()=>L(!1),className:"flex-1 px-6 py-3 border-2 border-gray-200 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),s.jsx("button",{onClick:P?async()=>{if(P&&R.title.trim())try{H(!0);const e={...R,deadline:R.deadline?new Date(R.deadline):void 0,estimatedTime:R.estimatedTime?parseInt(R.estimatedTime):void 0};await p(P.id,e),N("Task Updated","Your task has been updated successfully"),D(null),L(!1),V()}catch(e){w("Error",j(e))}finally{H(!1)}else w("Title Required","Please enter a task title")}:async()=>{if(R.title.trim())try{H(!0);const e={...R,userId:v.uid,deadline:R.deadline?new Date(R.deadline):void 0,estimatedTime:R.estimatedTime?parseInt(R.estimatedTime):void 0};await y(e),N("Task Created","Your task has been created successfully"),V(),L(!1)}catch(e){w("Error",j(e))}finally{H(!1)}else w("Title Required","Please enter a task title")},disabled:q,className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:q?s.jsx(b,{size:"sm",color:"blue"}):P?"Update Task":"Create Task"})]})]})})]})})};export{v as default};
